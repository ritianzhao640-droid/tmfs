<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>è¸é©¬å°ç¥ - ç‡ƒçƒ§åˆ†çº¢</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:#0b0f17;color:#fff;font-family:system-ui,-apple-system,Segoe UI,Roboto}
    .container{max-width:420px;margin:0 auto;padding:25px}
    .card{background:#121a29;border-radius:16px;padding:24px;margin-bottom:16px}
    .title{font-size:22px;font-weight:700;color:#ffdf4f;margin-bottom:6px}
    .subtitle{color:#9ca3af;font-size:14px;margin-bottom:20px}
    .input-box{position:relative}
    input{width:100%;background:#1e293b;border:none;border-radius:12px;padding:14px 16px;color:#fff;font-size:16px;margin-bottom:12px}
    button{width:100%;padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:600}
    .btn-burn{background:#ef4444;color:#fff}
    .btn-claim{background:#10b981;color:#fff;margin-top:8px}
    .panel{display:flex;justify-content:space-between;background:#111827;padding:14px 16px;border-radius:12px;margin-bottom:10px}
    .label{color:#9ca3af;font-size:13px}
    .value{color:#fff;font-weight:600}
  </style>
</head>
<body>
<div class="container">

  <div class="card">
    <div class="title">ğŸ”¥ è¸é©¬å°ç¥ ç‡ƒçƒ§åˆ†çº¢</div>
    <div class="subtitle">Burn To Earn | ç‡ƒçƒ§è·å–åˆ†çº¢æƒ</div>

    <div class="panel">
      <div class="label">æˆ‘çš„å¯é¢†å–åˆ†çº¢</div>
      <div class="value" id="pending">0.00 BNB</div>
    </div>
    <div class="panel">
      <div class="label">æˆ‘å·²ç‡ƒçƒ§</div>
      <div class="value" id="myburn">0 TAMA</div>
    </div>
    <div class="panel">
      <div class="label">å…¨ç½‘æ€»ç‡ƒçƒ§</div>
      <div class="value" id="totalburn">0 TAMA</div>
    </div>

    <div class="input-box">
      <input id="amount" type="number" placeholder="è¾“å…¥ç‡ƒçƒ§æ•°é‡" min="0"/>
    </div>

    <button class="btn-burn" onclick="burn()">ğŸ”¥ ç«‹å³ç‡ƒçƒ§</button>
    <button class="btn-claim" onclick="claim()">ğŸ’° é¢†å–åˆ†çº¢</button>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/web3@1.10.3/dist/web3.min.js"></script>
<script>
const CONTRACT = "0x9a889E525FAEF4851bf5BEbfb5F294AC9D097777";

const ABI = [
  {"inputs":[{"name":"amount","type":"uint256"}],"name":"burn","stateMutability":"nonpayable","type":"function"},
  {"inputs":[],"name":"claim","stateMutability":"nonpayable","type":"function"},
  {"inputs":[{"name":"user","type":"address"}],"name":"claimable","outputs":[{"type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[{"name":"user","type":"address"}],"name":"burnAmount","outputs":[{"type":"uint256"}],"stateMutability":"view","type":"function"},
  {"inputs":[],"name":"totalBurned","outputs":[{"type":"uint256"}],"stateMutability":"view","type":"function"}
];

async function connect(){
  await ethereum.request({method:"eth_requestAccounts"});
  const web3 = new Web3(ethereum);
  const account = (await web3.eth.getAccounts())[0];
  const c = new web3.eth.Contract(ABI, CONTRACT);
  return {web3, account, c};
}

async function burn(){
  const amt = document.getElementById("amount").value;
  if(!amt || amt <= 0) return alert("è¯·è¾“å…¥ç‡ƒçƒ§æ•°é‡");
  const {account, c, web3} = await connect();
  const val = web3.utils.toWei(amt, "ether");
  c.methods.burn(val).send({from:account})
    .on("transactionHash",h=>alert("æäº¤æˆåŠŸï¼š"+h))
    .on("receipt",()=>alert("âœ… ç‡ƒçƒ§æˆåŠŸï¼è·å¾—åˆ†çº¢æƒ"))
}

async function claim(){
  const {account, c} = await connect();
  c.methods.claim().send({from:account})
    .on("transactionHash",h=>alert("æäº¤æˆåŠŸï¼š"+h))
    .on("receipt",()=>alert("âœ… åˆ†çº¢é¢†å–æˆåŠŸ"))
}
</script>
</body>
</html>
